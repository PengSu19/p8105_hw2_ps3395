p8105_hw2_ps3395.Rmd
================
PENG
2023-10-01

``` r
library(tidyverse)
library(readxl)
```

# Problem 2

### Read and clean data from *“202207 Trash Wheel Collection Data.xlsx”*

``` r
#Read and clean the Mr. Trash Wheel sheet
Mr_trash = 
  readxl::read_excel("./data/202207 Trash Wheel Collection Data.xlsx", sheet = 1 ,range = "A2:N550") |>
  janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(homes_powered = round ((weight_tons * 500) / 30, 0),
         trashID = "Mr")

#Use a similar process to import, clean, and organize the data for Professor Trash Wheel and Gwynnda
professor_trash = 
  readxl::read_excel("./data/202207 Trash Wheel Collection Data.xlsx", sheet = 2 ,range = "A2:M97") |>
  janitor::clean_names() |>
  drop_na(dumpster)|>
  mutate(homes_powered = round ((weight_tons * 500) / 30, 0),
         trashID = "professor")

gwynnda_trash = 
  readxl::read_excel("./data/202207 Trash Wheel Collection Data.xlsx", sheet = 4 ,range = "A2:K110") |>
  janitor::clean_names() |>
  drop_na(dumpster)|>
  mutate(homes_powered = round ((weight_tons * 500) / 30, 0),
         trashID = "gwynnda")

#finding same columns in three dataset
common_col = Reduce(intersect, list(names(Mr_trash), names(professor_trash), names(gwynnda_trash)))

#merge three dataset by same columns to a single tidy data
merge_trash = merge(Mr_trash, professor_trash, by= common_col,all = TRUE) 
merge_trash = merge(merge_trash, gwynnda_trash, by = common_col, all = TRUE)|>
  janitor::clean_names()
```

### Description

Three datasets are involved in Problem 2, including *“Mr.”*,
*“Professor”* and *“Gwynnda”* Trash Wheel. Which containing 547, 94, and
106 observations respectively. Moreover, there are 11 common variables
involved in these three datasets, such as

- `month`, `year` and `date` for recording the time.
- `weight_tons` and `volume_cubic_yards` represent the weights and
  volumes of the trash.
- `plastic_bottles`, `polystyrene` and `cigarette_butts` indicate trash
  amount in different types.
- `homes_powered` represents the average time that electricity converted
  from garbage can be used by a household.

Then merging these three datasets into one dataframe called
*“merge_trash”*, which contains 747 observations and 19 variables.

For available data, the total weight of trash collected by Professor
Trash Wheel was 190.12 tons, and the total number of cigarette butts
collected by Gwynnda in July of 2021 was 16,300.

# Problem 3

### Import, clean, and tidy the dataset of baseline demographics

``` r
#import and clean the MCI baseline data
mci_baseline_na =
  read_csv("data/MCI_baseline.csv", skip = 1, na = ".") |>
  janitor::clean_names()|>
  mutate(
    sex = 
      case_match(
        sex, 
        1 ~ "male", 
        0 ~ "female"),
    sex = as.factor(sex),
    apoe4 = 
      case_match(
        apoe4,
        1 ~ "carrier", 
        0 ~ "non_carrier"),
    apoe4 = as.factor(apoe4)
      )

#remove the NA
mci_baseline = mci_baseline_na |> drop_na(age_at_onset)
```

### Data import steps and features

In order to have a tidy MCI baseline data, firstly, read the raw data
from relative paths with `.` in “Age at onset” transformed to `NA`, and
applied `janitor::clean_names()` to rename the variables.

Secondly, `mutate` function was performed to label the sex and APOE4
carrier status for participants, for `sex`, “1” represented “Male” while
“0” represented “Female”, and for `apoe4`, “1” indicated “APOE4 carrier”
while “0” indicated “APOE4 non_carrier”. Then these two variables were
transformed to factors.

In addition, as the study was focused on the MCI, participants who did
not develop MCI do not meet the stated inclusion criteria and were
removed by `drop_na` function. After all cleaning steps, only 97
observations remained with 6 variables.

In conclusion, 483 participants were recruited, and only 97 of these
developed MCI. Furthermore, the average baseline age is 65.61 and there
are 65.22% of women in the study carried APOE4.

### Similarly, import, clean, and tidy the dataset of longitudinally observed biomarker values

``` r
#import and clean the MCI baseline data
mci_amyloid =
  read_csv("data/mci_amyloid.csv", skip = 1, na = "NA") |>
  janitor::clean_names() |>
  select(id = study_id, everything())
```

### Data import steps and features

Similarly, `read_csv` was applied to import *amyloid* data and
`janitor::clean_names()` function was used to tidy the column names. In
addition, in order to compare with baseline data, `study_id` in amyloid
data was changed to `id`. For the dataset of longitudinally observed
biomarker values, it contains 487 participants and 6 variables, which
including `study_id` for each participants and `baseline` that
represents the time (years) elapsed since the study baseline to the
visit where biomarker Amyloid \_ 42/40 ratio was measured.

### check difference

``` r
# Check for participants appearing only in the baseline dataset
participants_only_in_baseline <- mci_baseline |>
  anti_join(mci_amyloid, by = "id")

# Check for participants appearing only in the amyloid dataset
participants_only_in_amyloid <- mci_amyloid |>
  anti_join(mci_baseline, by = "id")
```

### Comment

Comparing cleaned baseline and amyloid datasets, there are 3
participants appearing only in the baseline data, which are participants
with ID “14”, “49”, “268”, and 393 participants only in amyloid data.

### merge data

``` r
# combined two dataset and only contains participants that appearing in both datasets.
merge_mci = 
  inner_join(mci_baseline, mci_amyloid,by = "id") 

write.csv(merge_mci,"data/merge_mci.csv" ,row.names = F)
```

### Description

After combining baseline and amyloid data with participants that
appearing in both datasets, the merging dataset *“merge_mci”* finally
includes 94 observations with 11 variables that from two datasets.
